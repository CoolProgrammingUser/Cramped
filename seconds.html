<!DOCTYPE html>
<html>
    <head>
        <title>
            Countdowns
        </title>
        <script src="behavior.js"></script>
        <script>
            var timeNumber = 1;
            window.addEventListener("load", function() {
                makeCountdown("Christmas", "December 25, 2016 00:00");
                makeCountdown("next year", "January 1, 2017 00:00");
                makeCountdown("my birthday", "March 11, 2017 00:00");
                refresh();
            });
            function calculate() {
                var label = document.getElementById("label").value;
                var month = document.getElementById("month").value;
                var day = document.getElementById("day").value;
                var year = document.getElementById("year").value;
                var time = document.getElementById("time").value;
                var timeFormat = document.getElementById("timeFormat").value=="pm"?" PM":"";
                makeCountdown(label, month+" "+day+", "+year+" "+time+timeFormat);
                var IDs = ["label", "month", "day", "year", "time", "timeFormat"];
                for (var index in IDs) {
                    document.getElementById(IDs[index]).value = "";
                }
            }
            function makeCountdown(label, date) {
                var paragraph = document.createElement("p");
                paragraph.id = timeNumber;
                timeNumber++;
                paragraph.label = label;
                paragraph.date = date;
                document.body.insertBefore(paragraph, document.getElementById("loser"));
            }
            function refresh() {
                for (var number=1; number<timeNumber; number++) {
                    var element = document.getElementById(number);
                    var now = new Date();
                    var then = new Date(element.date);
                    var time = "";
                    if (document.getElementById("loser").checked) {
                        var code = [
                            "time += then.getFullYear - now.getFullYear + ' years ';",
                            "time += then.getMonth - now.getMonth + ' months ';",
                            "time += then.getTime - now.getTime + ' days ';",
                            "time += then.getHours - now.getHours + ' hours ';",
                            "time += then.getMinutes - now.getMinutes + ' minutes ';",
                            "time += then.getSeconds - now.getSeconds + ' seconds ';"
                        ]
                    } else {
                        var seconds = Math.ceil((then.getTime - now.getTime)/1000);
                        for (var index=3; index<seconds.length; index+=4) {
                            seconds = seconds.slice(0, -index) + "," + seconds.slice(-index);
                        }
                        time = seconds + " seconds";
                    }
                    element.innerHTML = element.label + ": " + time;
                }
                setTimeout(refresh, 1000);
            }
        </script>
        <link rel="stylesheet" href="formatting.css">
        <style>
        </style>
    </head>
    <body>
        <p>
            Trial number = 1
        </p>
        <h2>
            Time until...
        </h2>
        <input type="checkbox" id="loser"><label for="loser">I'm a loser and want the times displayed normally.</label>
        <br>
        <br>
        <h3>
            Start your own countdown:
        </h3>
        <input type="text" id="label" placeholder="Label"/>
        <br>
        <br>
        <select id="month">
            <option value="" disabled selected>
                Month
            </option>
            <option value="January">
                January
            </option>
            <option value="February">
                February
            </option>
            <option value="March">
                March
            </option>
            <option value="April">
                April
            </option>
            <option value="May">
                May
            </option>
            <option value="June">
                June
            </option>
            <option value="July">
                July
            </option>
            <option value="August">
                August
            </option>
            <option value="September">
                September
            </option>
            <option value="October">
                October
            </option>
            <option value="November">
                November
            </option>
            <option value="December">
                December
            </option>
        </select>
        <select id="day">
            <option value="" disabled selected>
                Day
            </option>
            <option value="01">
                1
            </option>
            <option value="02">
                2
            </option>
            <option value="03">
                3
            </option>
            <option value="04">
                4
            </option>
            <option value="05">
                5
            </option>
            <option value="06">
                6
            </option>
            <option value="07">
                7
            </option>
            <option value="08">
                8
            </option>
            <option value="09">
                9
            </option>
            <option value="10">
                10
            </option>
            <option value="11">
                11
            </option>
            <option value="12">
                12
            </option>
            <option value="13">
                13
            </option>
            <option value="14">
                14
            </option>
            <option value="15">
                15
            </option>
            <option value="16">
                16
            </option>
            <option value="17">
                17
            </option>
            <option value="18">
                18
            </option>
            <option value="19">
                19
            </option>
            <option value="20">
                20
            </option>
            <option value="21">
                21
            </option>
            <option value="22">
                22
            </option>
            <option value="23">
                23
            </option>
            <option value="24">
                24
            </option>
            <option value="25">
                25
            </option>
            <option value="26">
                26
            </option>
            <option value="27">
                27
            </option>
            <option value="28">
                28
            </option>
            <option value="29">
                29
            </option>
            <option value="30">
                30
            </option>
            <option value="31">
                31
            </option>
        </select>
        <input type="text" id="year" placeholder="Year"/>
        <br>
        <br>
        <input type="text" id="time" placeholder="Time"/>
        <select id="timeFormat">
            <option value="" disabled selected>
                Time format
            </option>
            <option value="am">
                am
            </option>
            <option value="pm">
                pm
            </option>
            <option value="24-hour">
                24-hour
            </option>
        </select>
        <br>
        <br>
        <button onclick="calculate()">
            Calculate
        </button>
    </body>
</html>
